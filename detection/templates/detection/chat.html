{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h2>Breast Cancer Awareness Chat</h2>
    <div id="chat-messages" class="mb-3"></div>
    <div class="input-group">
        <input type="text" id="question" class="form-control" placeholder="Ask a question...">
        <button onclick="sendMessage()" class="btn btn-primary">Send</button>
    </div>
</div>

<script>
function sendMessage() {
    const question = document.getElementById('question').value;
    fetch('/chat/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'X-CSRFToken': '{{ csrf_token }}'
        },
        body: `question=${encodeURIComponent(question)}`
    })
    .then(response => response.json())
    .then(data => {
        const messages = document.getElementById('chat-messages');
        messages.innerHTML += `<p><strong>You:</strong> ${question}</p>`;
        messages.innerHTML += `<p><strong>Bot:</strong> ${data.response}</p>`;
        document.getElementById('question').value = '';
    });
}
</script>
{% endblock %}